<html>

<head>
    <title>Hackathon Sept2023 - Callback</title>

    <script src="https://code.jquery.com/jquery-3.7.0.slim.min.js"
        integrity="sha256-tG5mcZUtJsZvyKAxYLVXrmjKBVLd6VpVccqz/r4ypFE=" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/fhirclient/build/fhir-client.min.js"></script>

    <script src="assets/js/auth.js"></script>

    <script>
        $(document).ready(function () {

            checkAuthentication({
                callback: () => {
                    const { pathname } = window.location;
                    const path = pathname.substring(0, pathname.lastIndexOf('/'));

                    let redirectUrl = `${path}/hackathon.html`;
                    
                    const urlParams = new URLSearchParams(window.location.search);
                    if (urlParams.has('launch')) {
                        const launch = urlParams.get('launch');
                        redirectUrl = `${redirectUrl}?id=${launch}`;
                    }

                    window.location.assign(redirectUrl);
                },
            });
        });
    </script>
</head>

<body>
</body>

</html>